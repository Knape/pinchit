!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("pinchit",[],t):"object"==typeof exports?exports.pinchit=t():e.pinchit=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=10)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return e+t},o=function(e){return{x:e.map(function(e){return e.x}).reduce(r)/e.length,y:e.map(function(e){return e.y}).reduce(r)/e.length}},a=function(e){return function(t){return t instanceof HTMLImageElement?t[e]:1}},i=(t.isWithin=function(e,t){var n=t.maxScale,r=t.minScale;return e>=r&&e<=n},t.addOffset=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},t.getX=a("offsetWidth"));t.getY=a("offsetHeight"),t.getInitialScale=function(e,t){return e instanceof HTMLImageElement?i(e)/t.offsetWidth:1},t.getScaleFactor=function(e,t,n){var r=t,o=t*e,a=n.maxScaleTimes,i=n.minScaleTimes;return o=Math.min(a,Math.max(o,i)),o/r},t.getZoomFactor=function(e,t,n){var r=n.maxScaleTimes,o=n.minScaleTimes;return Math.min(r,Math.max(t*e,o))},t.getTouchCenter=function(e){return o(e)},t.calcNewScale=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e/t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),a=r(o);t.default=a.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={baseScale:1,maxScale:3,maxScaleTimes:4,minScale:1,minScaleTimes:.8,snapBackSpeed:200,ease:"ease"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(5),u=r(i),c=n(8),f=n(7),s=r(f),l=n(0),d=n(6),m=n(2),y=r(m),v=function(e){return e[0]},p=function(e,t){return e.querySelector(t.target?"img"+t.target:"img")},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,r=void 0,i=1,f=void 0,m=1,h={x:0,y:0},g=!1,b=!1,x=a({},y.default,t),S=(0,u.default)(),T=S.on,M=S.dispatch,O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};M(e,Object.assign(n,{phase:t}))},_=function(){r=void 0,i=1,f=null,m=1,g=!1,b=!1,h={x:0,y:0}},j=function(e){if(O("touchstart","before",e),r=2===e.touches.length,f=Array.from(e.touches),i=1,(0,c.detectDoubleTap)(e)){var t=e.currentTarget.querySelector("img");(0,s.default)(e.target,t,1,{x:0,y:0},x.snapBackSpeed,x.ease),_()}O("touchstart","after",e)},w=function(e){if(O("touchmove","before",e),r&&f||!(m>1)){if(r&&f){(0,c.cancelEvent)(e);var t=(0,l.getTouchCenter)((0,c.getTouches)(e.currentTarget,Array.from(e.touches))),n=(0,c.calcScale)(e.currentTarget,f,Array.from(e.touches)),o=(0,l.calcNewScale)(n,i),a=(0,l.getScaleFactor)(o,m,x);m=(0,l.getZoomFactor)(o,m,x),h=(0,l.addOffset)(h,{x:(a-1)*(t.x+h.x),y:(a-1)*(t.y+h.y)}),i=n,h=(0,d.drag)(t,g,h,m),g=t}}else{(0,c.cancelEvent)(e);var u=v((0,c.getTouches)(e.currentTarget,Array.from(e.touches))),y=(0,d.drag)(u,b,h,m);h=(0,d.sanitizeOffset)(e.target,y,m),b=u}var p=e.currentTarget.querySelector("img");(0,s.default)(e.target,p,m,h,0,x.ease),O("touchmove","after",e)},E=function(e){if(O("touchend","before",e),b=!1,g=!1,i=1,m&&!(0,l.isWithin)(m,x)){var t=e.currentTarget.querySelector("img"),n=(0,l.getInitialScale)(e.target,t)*m<x.minScale;m=n?x.minScale:x.maxScale,h=(0,d.sanitizeOffset)(e.target,h,m),(0,s.default)(e.target,t,m,h,x.snapBackSpeed,x.ease)}O("touchend","after",e)},P=function(e){e.addEventListener("touchstart",j),e.addEventListener("touchmove",w),e.addEventListener("touchend",E)},k=function(e){e.removeEventListener("touchstart",j),e.removeEventListener("touchmove",w),e.removeEventListener("touchend",E)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n){var t=p(n,x);if(t){var r=Object.assign({},x,e),o=r.snapBackSpeed,a=r.easing;(0,s.default)(n,t,1,{x:0,y:0},o,a),_()}}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O("destroy","before",{}),n&&(L(e),k(n),n=null,_(),O("destroy","after",{}))},A=function(e){switch(n&&q(),O("init","before",{}),"undefined"==typeof e?"undefined":o(e)){case"object":n=e;break;case"string":n=document.querySelector(e);break;default:n=null}n&&P(n),O("init","after",{})};return A(e),{setup:A,reset:L,destroy:q,element:n,on:T}};t.default=h},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var t=void 0,n=void 0,r=void 0,o=void 0;return function(){var a=document.createElement("_"),i=a.style;""===i.webkitTransition&&(r="webkitTransitionEnd",n="webkitTransition"),""===i.transition&&(r="transitionend",n="transition"),""===i.webkitTransform&&(t="webkitTransform"),""===i.msTransform&&(t="msTransform"),""===i.transform&&(t="transform"),document.body.insertBefore(a,null),i[t]="translate3d(0, 0, 0)",o=!!e.getComputedStyle(a).getPropertyValue(t),document.body.removeChild(a)}(),{transform:t,transition:n,transitionEnd:r,hasScale3d:o}}}).call(t,n(9))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e={},t=function(t,n){e[t]=e[t]||[],e[t].push(n)},n=function(t,n){if(e[t])for(var r=0;r<e[t].length;r+=1)if(e[t][r]===n){e[t].splice(r,1);break}},r=function(t,n){e[t]&&e[t].forEach(function(e){e(n)})};return{on:t,off:n,dispatch:r}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drag=t.sanitizeOffset=void 0;var r=n(0),o=function(e,t,n){return{maxX:(n-t)*(0,r.getX)(e),maxY:(n-t)*(0,r.getY)(e)}};t.sanitizeOffset=function(e,t,n){var r=o(e,1,n),a=r.maxX,i=r.maxY,u=Math.max(a,0),c=Math.max(i,0),f=Math.min(a,0),s=Math.min(i,0);return{x:Math.min(Math.max(t.x,f),u),y:Math.min(Math.max(t.y,s),c)}},t.drag=function(e,t,n,o){return Object.prototype.hasOwnProperty.call(t,"x")?(0,r.addOffset)(n,{x:-((e.x-t.x)*o/o),y:-((e.y-t.y)*o/o)}):n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),a=r(o),i=n(0),u=(0,a.default)(),c=function(e,t,n,r){var o=e.style;o.transformOrigin="0% 0%",o[t+"TimingFunction"]=r,o[t+"Duration"]=n+"ms"};t.default=function(e,t,n,r,o,a){var f=u.transition,s=u.transform,l=u.hasScale3d,d=t.style,m=(0,i.getInitialScale)(e,t)*n,y=-r.x,v=-r.y;c(t,f,o,a);var p=l?"scale3d("+m+", "+m+", 1)":"scale("+m+", "+m+")",h="translate("+y+"px, "+v+"px)";d[s]=h+" "+p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=0,a=t.cancelEvent=function(e){e.stopPropagation(),e.preventDefault()},i=(t.detectDoubleTap=function(e){var t=(new Date).getTime();return e.touches.length>1&&(o=0),t-o<300?(a(e),!0):(1===e.touches.length&&(o=t),!1)},t.getTouches=function(e,t){var n=e.getBoundingClientRect();return t.map(function(e){return{x:e.pageX-(n.left+document.body.scrollLeft),y:e.pageY-(n.top+document.body.scrollTop)}})}),u=t.getDistance=function(e){var t=r(e,2),n=t[0],o=t[1];return Math.sqrt((n.x-o.x)*(n.x-o.x)+(n.y-o.y)*(n.y-o.y))};t.calcScale=function(e,t,n){return u(i(e,n))/u(i(e,t))}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(1)}])});